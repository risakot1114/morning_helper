<!DOCTYPE html>
<html lang="ja">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä»Šæ—¥ã®ã‚³ãƒ¼ãƒ‡äºˆå ± - ãƒãƒƒãƒ—&CUTEãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—</title>
  
  <!-- Tailwind CSS ã‚’èª­ã¿è¾¼ã¿ -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fontsï¼ˆM PLUS Rounded 1cï¼‰ã‚’èª­ã¿è¾¼ã¿ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    /* ãƒãƒƒãƒ—ã§CUTEãªãƒ†ãƒ¼ãƒã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
    body {
      font-family: 'M PLUS Rounded 1c', sans-serif;
      background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 50%, #E0F6FF 100%);
      background-attachment: fixed;
      color: #2c3e50;
      position: relative;
      overflow-x: hidden;
    }
    
    /* ã¯ã£ãã‚Šã¨ã—ãŸé›²ã®å½¢ */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        /* å¤§ããªé›²1 - è‡ªç„¶ãªé›²ã®å½¢ */
        radial-gradient(ellipse 100px 70px at 20% 17%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 80px 50px at 16% 20%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 60px 40px at 23% 20%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²2 - è‡ªç„¶ãªé›²ã®å½¢ */
        radial-gradient(ellipse 90px 65px at 75% 22%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 70px 45px at 72% 25%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 50px 35px at 78% 25%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²3 - è‡ªç„¶ãªé›²ã®å½¢ */
        radial-gradient(ellipse 85px 60px at 50% 9%, rgba(255, 255, 255, 0.97) 0%, rgba(255, 255, 255, 0.88) 30%, transparent 70%),
        radial-gradient(ellipse 65px 45px at 47% 12%, rgba(255, 255, 255, 0.94) 0%, rgba(255, 255, 255, 0.78) 40%, transparent 80%),
        radial-gradient(ellipse 50px 35px at 53% 12%, rgba(255, 255, 255, 0.89) 0%, rgba(255, 255, 255, 0.68) 50%, transparent 90%),
        
        /* å¤§ããªé›²4 - è‡ªç„¶ãªé›²ã®å½¢ */
        radial-gradient(ellipse 95px 68px at 30% 35%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 75px 48px at 27% 37%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 55px 38px at 33% 37%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²5 - è‡ªç„¶ãªé›²ã®å½¢ */
        radial-gradient(ellipse 88px 62px at 85% 43%, rgba(255, 255, 255, 0.97) 0%, rgba(255, 255, 255, 0.88) 30%, transparent 70%),
        radial-gradient(ellipse 68px 42px at 89% 46%, rgba(255, 255, 255, 0.94) 0%, rgba(255, 255, 255, 0.78) 40%, transparent 80%),
        radial-gradient(ellipse 48px 32px at 82% 46%, rgba(255, 255, 255, 0.89) 0%, rgba(255, 255, 255, 0.68) 50%, transparent 90%),
        radial-gradient(ellipse 80px 55px at 25% 60%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 35%, transparent 75%),
        radial-gradient(ellipse 60px 40px at 13% 55%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.75) 45%, transparent 85%),
        
        /* å¤§ããªé›²6 - ä¸‹éƒ¨å·¦ */
        radial-gradient(ellipse 100px 70px at 15% 75%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 80px 50px at 12% 78%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 60px 40px at 18% 78%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²7 - ä¸‹éƒ¨ä¸­å¤®å·¦ */
        radial-gradient(ellipse 100px 70px at 35% 80%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 80px 50px at 32% 83%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 60px 40px at 38% 83%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²8 - ä¸‹éƒ¨ä¸­å¤®å³ */
        radial-gradient(ellipse 100px 70px at 55% 85%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 80px 50px at 52% 88%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 60px 40px at 58% 82%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²9 - ä¸‹éƒ¨å³ */
        radial-gradient(ellipse 100px 70px at 75% 78%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 80px 50px at 72% 81%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 60px 40px at 78% 81%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²10 - ä¸‹éƒ¨å³ç«¯ */
        radial-gradient(ellipse 100px 70px at 95% 82%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 80px 50px at 92% 85%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 60px 40px at 98% 85%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        radial-gradient(ellipse 75px 50px at 73% 57%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 35%, transparent 75%),
        radial-gradient(ellipse 55px 35px at 70% 60%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.75) 45%, transparent 85%),
        
        /* å°ã•ãªé›²ãŸã¡ - è‡ªç„¶ãªå½¢ */
        radial-gradient(ellipse 50px 35px at 10% 80%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.75) 40%, transparent 80%),
        radial-gradient(ellipse 40px 30px at 60% 15%, rgba(255, 255, 255, 0.85) 0%, rgba(255, 255, 255, 0.7) 45%, transparent 85%),
        radial-gradient(ellipse 35px 25px at 10% 57%, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0.65) 50%, transparent 90%);
      animation: clearCloudFloat 40s ease-in-out infinite;
      z-index: -1;
    }
    
    @keyframes clearCloudFloat {
      0%, 100% { transform: translateX(0px) translateY(0px) scale(1); }
      25% { transform: translateX(10px) translateY(-5px) scale(1.01); }
      50% { transform: translateX(-8px) translateY(8px) scale(0.99); }
      75% { transform: translateX(12px) translateY(-6px) scale(1.005); }
    }
    .card {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.9));
      border-radius: 2.5rem; /* ãƒˆã‚¤ãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é¢¨ã®ä¸¸è§’ */
      padding: 1.8rem;
      margin-bottom: 1.5rem;
      box-shadow: 
        0 12px 30px -8px rgba(135, 206, 235, 0.4),
        0 6px 20px -4px rgba(176, 224, 230, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.9),
        0 0 0 1px rgba(255, 255, 255, 0.6);
      border: 3px solid rgba(255, 255, 255, 0.9);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(15px);
      position: relative;
    }
    .card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 20px 40px -10px rgba(135, 206, 235, 0.5),
        0 10px 30px -6px rgba(176, 224, 230, 0.4),
        inset 0 3px 0 rgba(255, 255, 255, 0.95);
    }
    .app-title {
      color: #2E86AB; /* ãƒˆã‚¤ãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é¢¨ã®ãƒ–ãƒ«ãƒ¼ */
      font-weight: 800;
      font-size: 1.6rem;
      text-shadow: 
        0 3px 6px rgba(255, 255, 255, 0.9),
        0 1px 3px rgba(46, 134, 171, 0.3);
      letter-spacing: 0.5px;
    }
    .icon-bg {
      width: 5rem;
      height: 5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(135, 206, 235, 0.2));
      font-size: 2.8rem;
      box-shadow: 
        0 8px 20px -4px rgba(135, 206, 235, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.8);
      border: 3px solid rgba(255, 255, 255, 0.8);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .plus-icon {
      color: #87CEEB; /* ãƒ—ãƒ©ã‚¹è¨˜å·ã‚’ã‚¹ã‚«ã‚¤ãƒ–ãƒ«ãƒ¼ã« */
      font-size: 2.5rem;
      font-weight: 300;
      text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
    }
    .advice-box {
      background: linear-gradient(135deg, rgba(135, 206, 235, 0.2), rgba(176, 224, 230, 0.1));
      color: #4682B4;
      border-radius: 1rem;
      padding: 1rem;
      font-weight: 500;
      border: 1px solid rgba(255, 255, 255, 0.6);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }
    .footer-nav a.active {
      color: #4682B4;
    }
    
    /* ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .style-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 0.5rem 0.75rem;
      border-radius: 1rem;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.8), rgba(135, 206, 235, 0.1));
      border: 2px solid rgba(255, 255, 255, 0.6);
      color: #666;
      font-weight: 500;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      min-width: 4rem;
      box-shadow: 0 4px 12px -4px rgba(135, 206, 235, 0.2);
    }
    
    .style-btn:hover {
      transform: translateY(-2px) scale(1.05);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(135, 206, 235, 0.2));
      box-shadow: 0 6px 16px -4px rgba(135, 206, 235, 0.3);
    }
    
    .style-btn.active {
      background: linear-gradient(145deg, rgba(70, 130, 180, 0.2), rgba(135, 206, 235, 0.3));
      color: #4682B4;
      border-color: rgba(70, 130, 180, 0.4);
      box-shadow: 
        0 6px 16px -4px rgba(70, 130, 180, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.8);
    }
    
    .style-btn.active:hover {
      transform: translateY(-2px) scale(1.05);
      background: linear-gradient(145deg, rgba(70, 130, 180, 0.3), rgba(135, 206, 235, 0.4));
    }
  </style>
  </head>
<body class="antialiased">

  <div class="container mx-auto max-w-sm p-4 pb-32">

    <!-- ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== -->
    <header class="flex justify-between items-center py-4 px-2">
      <h1 class="app-title">Otenki Coord</h1>
      <div class="w-8 h-8 flex items-center justify-center rounded-full bg-white shadow-md">
        <span class="text-xl" role="img" aria-label="settings">âš™ï¸</span>
      </div>
    </header>

    <main>
      <!-- ===== ä»Šæ—¥ã®å¤©æ°—ã‚¨ãƒªã‚¢ ===== -->
      <section class="card text-center transform -rotate-1">
        <h2 class="font-bold text-lg text-gray-600" id="location">æ±äº¬éƒ½, æ¸‹è°·åŒº</h2>
        <p class="text-sm text-gray-400 mb-4" id="date">9æœˆ23æ—¥ (ç«)</p>
        
        <div class="flex justify-center items-center gap-4">
          <!-- å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰ -->
          <span class="text-7xl" role="img" aria-label="partly-sunny" id="weather-icon">ğŸŒ¤ï¸</span>
          <div>
            <!-- ç¾åœ¨ã®æ°—æ¸© -->
            <p class="text-6xl font-bold text-gray-800" id="temperature">23<span class="text-2xl align-top text-gray-500">â„ƒ</span></p>
          </div>
        </div>

        <div class="mt-4 flex justify-around text-center">
          <div>
            <p class="text-sm text-gray-500">æœ€é«˜/æœ€ä½</p>
            <p class="font-bold text-gray-700" id="temp-range">25â„ƒ / 18â„ƒ</p>
          </div>
          <div>
            <p class="text-sm text-gray-500">é™æ°´ç¢ºç‡</p>
            <p class="font-bold text-gray-700" id="rain-probability">20%</p>
          </div>
        </div>
      </section>

      <!-- ===== ä»Šæ—¥ã®æœè£…ææ¡ˆã‚¨ãƒªã‚¢ ===== -->
      <section class="card transform rotate-1">
        <h3 class="font-bold text-lg mb-4 text-center">ãã‚‡ã†ã®ã‚³ãƒ¼ãƒ‡æ¡ˆ</h3>
        
        <!-- ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ -->
        <div class="flex justify-center gap-2 mb-4">
          <button class="style-btn active" data-style="business" id="style-business">
            <span class="text-lg">ğŸ‘”</span>
            <span class="text-xs">ãƒ“ã‚¸ãƒã‚¹</span>
          </button>
          <button class="style-btn" data-style="casual" id="style-casual">
            <span class="text-lg">ğŸ‘•</span>
            <span class="text-xs">ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«</span>
          </button>
          <button class="style-btn" data-style="child" id="style-child">
            <span class="text-lg">ğŸ‘¶</span>
            <span class="text-xs">ã‚­ãƒƒã‚º</span>
          </button>
        </div>
        
        <div class="flex justify-around items-center text-center">
          <!-- æœè£…ã‚¢ã‚¤ã‚³ãƒ³ (çµµæ–‡å­—) -->
          <div class="flex flex-col items-center">
            <div class="icon-bg"><span role="img" aria-label="cardigan" id="clothing-icon-1">ğŸ§¥</span></div>
            <p class="text-sm mt-2 font-semibold" id="clothing-name-1">ã‚«ãƒ¼ãƒ‡</p>
          </div>
          <span class="plus-icon">+</span>
          <div class="flex flex-col items-center">
            <div class="icon-bg"><span role="img" aria-label="t-shirt" id="clothing-icon-2">ğŸ‘•</span></div>
            <p class="text-sm mt-2 font-semibold" id="clothing-name-2">åŠè¢–</p>
          </div>
          <span class="plus-icon">+</span>
          <div class="flex flex-col items-center">
             <div class="icon-bg"><span role="img" aria-label="jeans" id="clothing-icon-3">ğŸ‘–</span></div>
            <p class="text-sm mt-2 font-semibold" id="clothing-name-3">é•·ã‚ºãƒœãƒ³</p>
          </div>
        </div>
        <p class="mt-6 text-sm advice-box" id="clothing-advice">
          æ—¥ä¸­ã¯ã½ã‹ã½ã‹é™½æ°—ã ã‘ã©ã€å¤œã¯è‚Œå¯’ã„ã‹ã‚‚ã€‚ç¾½ç¹”ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã¨å®‰å¿ƒã ã‚ˆï¼
        </p>
      </section>

      <!-- ===== æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚¨ãƒªã‚¢ ===== -->
      <section class="card transform -rotate-1">
        <h3 class="font-bold text-lg mb-4">ãŠã™ã™ã‚ã®æŒã¡ç‰©</h3>
        <div class="space-y-4" id="items-advice">
          <div class="flex items-center gap-4">
            <span class="text-3xl" role="img" aria-label="umbrella">ğŸŒ‚</span>
            <p class="text-sm">å¤•æ–¹ã‹ã‚‰é›¨ãŒé™ã‚‹ã‹ã‚‚ï¼ŸæŠ˜ã‚ŠãŸãŸã¿å‚˜ãŒã‚ã‚‹ã¨å®‰å¿ƒï¼</p>
          </div>
          <div class="flex items-center gap-4">
            <span class="text-3xl" role="img" aria-label="sunglasses">ğŸ•¶ï¸</span>
            <p class="text-sm">æ—¥å·®ã—ãŒå¼·ã„ã‹ã‚‰ã€UVå¯¾ç­–ã¯å¿˜ã‚Œãšã«ã­ã€‚</p>
          </div>
        </div>
      </section>
    </main>
  </div>
  
  <!-- ===== ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ===== -->
  <footer class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm max-w-sm mx-auto rounded-t-3xl shadow-lg border-t border-blue-100">
    <nav class="flex justify-around py-3">
      <a href="#" class="flex flex-col items-center justify-center text-center w-full py-2 active">
        <span class="text-2xl" role="img" aria-label="home">ğŸ </span>
        <span class="text-xs font-bold">ãƒ›ãƒ¼ãƒ </span>
      </a>
      <a href="#" class="flex flex-col items-center justify-center text-gray-400 text-center w-full py-2">
        <span class="text-2xl" role="img" aria-label="calendar">ğŸ—“ï¸</span>
        <span class="text-xs">é€±é–“</span>
      </a>
      <a href="#" class="flex flex-col items-center justify-center text-gray-400 text-center w-full py-2">
        <span class="text-2xl" role="img" aria-label="people">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
        <span class="text-xs">ã¿ã‚“ãª</span>
      </a>
      <a href="#" class="flex flex-col items-center justify-center text-gray-400 text-center w-full py-2">
        <span class="text-2xl" role="img" aria-label="person">ğŸ¥°</span>
        <span class="text-xs">ãƒã‚¤ãƒšãƒ¼ã‚¸</span>
      </a>
    </nav>
  </footer>

  <script>
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
    let currentWeatherData = null;
    let currentStyle = 'business';
    let userLocation = null;
    
    // ç¾åœ¨åœ°ã‚’å–å¾—ã™ã‚‹é–¢æ•°
    function getCurrentLocation() {
      return new Promise((resolve, reject) => {
        if (!navigator.geolocation) {
          reject(new Error('Geolocation is not supported by this browser.'));
          return;
        }
        
        navigator.geolocation.getCurrentPosition(
          (position) => {
            const location = {
              lat: position.coords.latitude,
              lon: position.coords.longitude,
              accuracy: position.coords.accuracy
            };
            userLocation = location;
            resolve(location);
          },
          (error) => {
            console.warn('GPSå–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error.message);
            // GPSãŒåˆ©ç”¨ã§ããªã„å ´åˆã¯æ±äº¬ã®åº§æ¨™ã‚’ä½¿ç”¨
            const fallbackLocation = {
              lat: 35.6762,
              lon: 139.6503,
              accuracy: null
            };
            userLocation = fallbackLocation;
            resolve(fallbackLocation);
          },
          {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 300000 // 5åˆ†é–“ã‚­ãƒ£ãƒƒã‚·ãƒ¥
          }
        );
      });
    }
    
    // ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
    async function fetchAndDisplayData() {
      try {
        // ç¾åœ¨ã®æ—¥ä»˜ã‚’è¡¨ç¤º
        const today = new Date();
        const options = { 
          year: 'numeric', 
          month: 'long', 
          day: 'numeric',
          weekday: 'short'
        };
        const dateString = today.toLocaleDateString('ja-JP', options);
        document.getElementById('date').textContent = dateString;
        
        // ç¾åœ¨åœ°ã‚’å–å¾—
        const location = await getCurrentLocation();
        console.log('ç¾åœ¨åœ°:', location);
        
        // å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const weatherResponse = await fetch(`/api/v1/weather?lat=${location.lat}&lon=${location.lon}`);
        const weatherData = await weatherResponse.json();
        
        if (weatherData.status === 'success') {
          currentWeatherData = weatherData.data;
          
          // å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
          document.getElementById('weather-icon').textContent = weatherData.data.current.icon;
          document.getElementById('temperature').innerHTML = weatherData.data.current.temperature + '<span class="text-2xl align-top text-gray-500">â„ƒ</span>';
          document.getElementById('temp-range').textContent = `${weatherData.data.today.max_temp}â„ƒ / ${weatherData.data.today.min_temp}â„ƒ`;
          document.getElementById('rain-probability').textContent = weatherData.data.today.rain_probability + '%';
          
          // å ´æ‰€ã®æƒ…å ±ã‚’è¡¨ç¤º
          if (weatherData.data.location) {
            document.getElementById('location').textContent = weatherData.data.location.name;
          }
          
          // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«ã§ï¼‰
          await fetchClothingData(currentStyle);
          
          // æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å–å¾—
          const itemsResponse = await fetch(`/api/v1/items?temperature=${weatherData.data.current.temperature}&weather=${weatherData.data.current.condition}&humidity=${weatherData.data.current.humidity}&wind_speed=${weatherData.data.current.wind_speed}`);
          const itemsData = await itemsResponse.json();
          
          if (itemsData.status === 'success') {
            // æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¡¨ç¤º
            displayItemsAdvice(itemsData.data);
          }
        }
      } catch (error) {
        console.error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
        // ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¡¨ç¤º
        displayDefaultItemsAdvice();
      }
    }
    
    // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹é–¢æ•°
    async function fetchClothingData(style) {
      if (!currentWeatherData) return;
      
      try {
        const temp = currentWeatherData.current.temperature;
        const clothingResponse = await fetch(`/api/v1/clothing?temperature=${temp}&weather=${currentWeatherData.current.condition}&style=${style}`);
        const clothingData = await clothingResponse.json();
        
        if (clothingData.status === 'success') {
          // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
          displayClothingData(clothingData.data);
        }
      } catch (error) {
        console.error('æœè£…ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
      }
    }
    
    // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function displayClothingData(clothingData) {
      const outfit = clothingData.outfit;
      
      // ã‚¢ã‚¦ã‚¿ãƒ¼ãŒã‚ã‚‹å ´åˆã¨ãªã„å ´åˆã§è¡¨ç¤ºã‚’åˆ†ã‘ã‚‹
      if (outfit.outer) {
        // ã‚¢ã‚¦ã‚¿ãƒ¼ãŒã‚ã‚‹å ´åˆ: ã‚¢ã‚¦ã‚¿ãƒ¼ + ãƒˆãƒƒãƒ—ã‚¹ + ãƒœãƒˆãƒ ã‚¹
        document.getElementById('clothing-icon-1').textContent = getOuterIcon(outfit.outer);
        document.getElementById('clothing-name-1').textContent = outfit.outer;
        document.getElementById('clothing-icon-2').textContent = getTopIcon(outfit.top);
        document.getElementById('clothing-name-2').textContent = outfit.top;
        document.getElementById('clothing-icon-3').textContent = getBottomIcon(outfit.bottom);
        document.getElementById('clothing-name-3').textContent = outfit.bottom;
      } else {
        // ã‚¢ã‚¦ã‚¿ãƒ¼ãŒãªã„å ´åˆ: ãƒˆãƒƒãƒ—ã‚¹ + ãƒœãƒˆãƒ ã‚¹ + é´/ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼
        document.getElementById('clothing-icon-1').textContent = getTopIcon(outfit.top);
        document.getElementById('clothing-name-1').textContent = outfit.top;
        document.getElementById('clothing-icon-2').textContent = getBottomIcon(outfit.bottom);
        document.getElementById('clothing-name-2').textContent = outfit.bottom;
        
        // 3ç•ªç›®ã¯é´ã‚„ã‚¢ã‚¯ã‚»ã‚µãƒªãƒ¼ã‚’è¡¨ç¤º
        if (outfit.shoes) {
          document.getElementById('clothing-icon-3').textContent = getShoesIcon(outfit.shoes);
          document.getElementById('clothing-name-3').textContent = outfit.shoes;
        } else if (outfit.accessories && outfit.accessories.length > 0) {
          document.getElementById('clothing-icon-3').textContent = getAccessoryIcon(outfit.accessories[0]);
          document.getElementById('clothing-name-3').textContent = outfit.accessories[0];
        } else {
          document.getElementById('clothing-icon-3').textContent = 'âœ¨';
          document.getElementById('clothing-name-3').textContent = 'å¿«é©';
        }
      }
      
      document.getElementById('clothing-advice').textContent = clothingData.advice;
    }
    
    // ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—ã™ã‚‹ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
    function getOuterIcon(outer) {
      if (outer.includes('ã‚³ãƒ¼ãƒˆ')) return 'ğŸ§¥';
      if (outer.includes('ã‚¸ãƒ£ã‚±ãƒƒãƒˆ') || outer.includes('ãƒ–ãƒ¬ã‚¶ãƒ¼')) return 'ğŸ‘”';
      if (outer.includes('ãƒ‘ãƒ¼ã‚«ãƒ¼')) return 'ğŸ§¥';
      if (outer.includes('ãƒ€ã‚¦ãƒ³')) return 'ğŸ§¥';
      return 'ğŸ§¥';
    }
    
    function getTopIcon(top) {
      if (top.includes('ãƒãƒ­')) return 'ğŸŒï¸';
      if (top.includes('ãƒ¯ã‚¤ã‚·ãƒ£ãƒ„') || top.includes('ã‚·ãƒ£ãƒ„')) return 'ğŸ‘”';
      if (top.includes('Tã‚·ãƒ£ãƒ„') || top.includes('åŠè¢–')) return 'ğŸ‘•';
      if (top.includes('ã‚»ãƒ¼ã‚¿ãƒ¼')) return 'ğŸ§¶';
      if (top.includes('ã‚¿ãƒ³ã‚¯')) return 'ğŸ©³';
      return 'ğŸ‘•';
    }
    
    function getBottomIcon(bottom) {
      if (bottom.includes('ã‚¹ãƒ©ãƒƒã‚¯ã‚¹') || bottom.includes('ã‚ºãƒœãƒ³')) return 'ğŸ‘–';
      if (bottom.includes('ã‚¸ãƒ¼ãƒ³ã‚º')) return 'ğŸ‘–';
      if (bottom.includes('ãƒãƒ')) return 'ğŸ‘–';
      if (bottom.includes('åŠã‚ºãƒœãƒ³') || bottom.includes('ã‚·ãƒ§ãƒ¼ãƒˆ')) return 'ğŸ©³';
      return 'ğŸ‘–';
    }
    
    function getShoesIcon(shoes) {
      if (shoes.includes('é©é´')) return 'ğŸ‘';
      if (shoes.includes('ãƒ­ãƒ¼ãƒ•ã‚¡ãƒ¼')) return 'ğŸ‘';
      if (shoes.includes('ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼') || shoes.includes('é‹å‹•é´')) return 'ğŸ‘Ÿ';
      if (shoes.includes('ãƒ–ãƒ¼ãƒ„')) return 'ğŸ‘¢';
      if (shoes.includes('ã‚µãƒ³ãƒ€ãƒ«')) return 'ğŸ©´';
      return 'ğŸ‘Ÿ';
    }
    
    function getAccessoryIcon(accessory) {
      if (accessory.includes('ãƒãƒ•ãƒ©ãƒ¼')) return 'ğŸ§£';
      if (accessory.includes('æ‰‹è¢‹')) return 'ğŸ§¤';
      if (accessory.includes('ãƒã‚¯ã‚¿ã‚¤')) return 'ğŸ‘”';
      if (accessory.includes('å¸½å­') || accessory.includes('ãƒ‹ãƒƒãƒˆå¸½')) return 'ğŸ‘’';
      return 'ğŸ§£';
    }

    // æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function displayItemsAdvice(itemsData) {
      const itemsContainer = document.getElementById('items-advice');
      itemsContainer.innerHTML = '';
      
      // å¿…é ˆã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
      itemsData.essential_items.forEach(item => {
        const itemElement = document.createElement('div');
        itemElement.className = 'flex items-center gap-4 mb-3';
        itemElement.innerHTML = `
          <span class="text-3xl" role="img" aria-label="${item.name}">${item.icon}</span>
          <div>
            <p class="text-sm font-semibold text-gray-800">${item.name}</p>
            <p class="text-xs text-gray-600">${item.reason}</p>
          </div>
        `;
        itemsContainer.appendChild(itemElement);
      });
      
      // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’è¡¨ç¤º
      if (itemsData.optional_items.length > 0) {
        const optionalHeader = document.createElement('div');
        optionalHeader.className = 'mt-4 pt-3 border-t border-gray-200';
        optionalHeader.innerHTML = '<p class="text-xs text-gray-500 font-semibold mb-2">ãŠã™ã™ã‚ï¼ˆä»»æ„ï¼‰</p>';
        itemsContainer.appendChild(optionalHeader);
        
        itemsData.optional_items.forEach(item => {
          const itemElement = document.createElement('div');
          itemElement.className = 'flex items-center gap-4 mb-3 opacity-75';
          itemElement.innerHTML = `
            <span class="text-2xl" role="img" aria-label="${item.name}">${item.icon}</span>
            <div>
              <p class="text-sm text-gray-700">${item.name}</p>
              <p class="text-xs text-gray-500">${item.reason}</p>
            </div>
          `;
          itemsContainer.appendChild(itemElement);
        });
      }
    }

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function displayDefaultItemsAdvice() {
      const itemsContainer = document.getElementById('items-advice');
      itemsContainer.innerHTML = `
        <div class="flex items-center gap-4">
          <span class="text-3xl" role="img" aria-label="umbrella">ğŸŒ‚</span>
          <p class="text-sm">å¤•æ–¹ã‹ã‚‰é›¨ãŒé™ã‚‹ã‹ã‚‚ï¼ŸæŠ˜ã‚ŠãŸãŸã¿å‚˜ãŒã‚ã‚‹ã¨å®‰å¿ƒï¼</p>
        </div>
        <div class="flex items-center gap-4">
          <span class="text-3xl" role="img" aria-label="sunglasses">ğŸ•¶ï¸</span>
          <p class="text-sm">æ—¥å·®ã—ãŒå¼·ã„ã‹ã‚‰ã€UVå¯¾ç­–ã¯å¿˜ã‚Œãšã«ã­ã€‚</p>
        </div>
      `;
    }

    // ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥é–¢æ•°
    function refreshData() {
      fetchAndDisplayData();
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    document.addEventListener('DOMContentLoaded', function() {
      fetchAndDisplayData();
      
      // ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
      const styleButtons = document.querySelectorAll('.style-btn');
      styleButtons.forEach(button => {
        button.addEventListener('click', function() {
          // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
          styleButtons.forEach(btn => btn.classList.remove('active'));
          
          // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸãƒœã‚¿ãƒ³ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
          this.classList.add('active');
          
          // é¸æŠã•ã‚ŒãŸã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°
          currentStyle = this.dataset.style;
          
          // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’å†å–å¾—
          fetchClothingData(currentStyle);
        });
      });
    });
  </script>
  </body>
</html>