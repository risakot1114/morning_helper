<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ä»Šæ—¥ã®ã‚³ãƒ¼ãƒ‡äºˆå ± - ãƒãƒƒãƒ—&CUTEãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—</title>
  
  <!-- Tailwind CSS ã‚’èª­ã¿è¾¼ã¿ -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fontsï¼ˆM PLUS Rounded 1cï¼‰ã‚’èª­ã¿è¾¼ã¿ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap" rel="stylesheet">

  <style>
    /* ãƒãƒƒãƒ—ã§CUTEãªãƒ†ãƒ¼ãƒã®ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
    body {
      font-family: 'M PLUS Rounded 1c', sans-serif;
      background: linear-gradient(135deg, #87CEEB 0%, #B0E0E6 50%, #E0F6FF 100%);
      background-attachment: fixed;
      color: #2c3e50;
      position: relative;
      overflow-x: hidden;
    }
    
    /* ã¯ã£ãã‚Šã¨ã—ãŸé›²ã®å½¢ */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        /* å¤§ããªé›²1 - ã¯ã£ãã‚Šã¨ã—ãŸé›²ã®å½¢ */
        radial-gradient(ellipse 120px 80px at 20% 25%, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 100px 60px at 15% 20%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 80px 50px at 25% 30%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* å¤§ããªé›²2 */
        radial-gradient(ellipse 110px 70px at 75% 30%, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0.9) 30%, transparent 70%),
        radial-gradient(ellipse 90px 55px at 70% 25%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 70px 45px at 80% 35%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        
        /* ä¸­ã‚µã‚¤ã‚ºã®é›²1 */
        radial-gradient(ellipse 80px 50px at 40% 65%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.85) 35%, transparent 75%),
        radial-gradient(ellipse 60px 40px at 35% 60%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 45%, transparent 85%),
        
        /* ä¸­ã‚µã‚¤ã‚ºã®é›²2 */
        radial-gradient(ellipse 70px 45px at 90% 75%, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.85) 35%, transparent 75%),
        radial-gradient(ellipse 50px 35px at 85% 70%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 45%, transparent 85%),
        
        /* å°ã•ãªé›²ãŸã¡ */
        radial-gradient(ellipse 50px 30px at 10% 85%, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.8) 40%, transparent 80%),
        radial-gradient(ellipse 40px 25px at 60% 15%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 50%, transparent 90%),
        radial-gradient(ellipse 35px 20px at 30% 45%, rgba(255, 255, 255, 0.85) 0%, rgba(255, 255, 255, 0.6) 60%, transparent 100%);
      animation: clearCloudFloat 40s ease-in-out infinite;
      z-index: -1;
    }
    
    @keyframes clearCloudFloat {
      0%, 100% { transform: translateX(0px) translateY(0px) scale(1); }
      25% { transform: translateX(10px) translateY(-5px) scale(1.01); }
      50% { transform: translateX(-8px) translateY(8px) scale(0.99); }
      75% { transform: translateX(12px) translateY(-6px) scale(1.005); }
    }
    .card {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.9));
      border-radius: 2.5rem; /* ãƒˆã‚¤ãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é¢¨ã®ä¸¸è§’ */
      padding: 1.8rem;
      margin-bottom: 1.5rem;
      box-shadow: 
        0 12px 30px -8px rgba(135, 206, 235, 0.4),
        0 6px 20px -4px rgba(176, 224, 230, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.9),
        0 0 0 1px rgba(255, 255, 255, 0.6);
      border: 3px solid rgba(255, 255, 255, 0.9);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(15px);
      position: relative;
    }
    .card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 20px 40px -10px rgba(135, 206, 235, 0.5),
        0 10px 30px -6px rgba(176, 224, 230, 0.4),
        inset 0 3px 0 rgba(255, 255, 255, 0.95);
    }
    .app-title {
      color: #2E86AB; /* ãƒˆã‚¤ãƒ»ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é¢¨ã®ãƒ–ãƒ«ãƒ¼ */
      font-weight: 800;
      font-size: 1.6rem;
      text-shadow: 
        0 3px 6px rgba(255, 255, 255, 0.9),
        0 1px 3px rgba(46, 134, 171, 0.3);
      letter-spacing: 0.5px;
    }
    .icon-bg {
      width: 5rem;
      height: 5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(135, 206, 235, 0.2));
      font-size: 2.8rem;
      box-shadow: 
        0 8px 20px -4px rgba(135, 206, 235, 0.3),
        inset 0 2px 0 rgba(255, 255, 255, 0.8);
      border: 3px solid rgba(255, 255, 255, 0.8);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .plus-icon {
      color: #87CEEB; /* ãƒ—ãƒ©ã‚¹è¨˜å·ã‚’ã‚¹ã‚«ã‚¤ãƒ–ãƒ«ãƒ¼ã« */
      font-size: 2.5rem;
      font-weight: 300;
      text-shadow: 0 2px 4px rgba(255, 255, 255, 0.8);
    }
    .advice-box {
      background: linear-gradient(135deg, rgba(135, 206, 235, 0.2), rgba(176, 224, 230, 0.1));
      color: #4682B4;
      border-radius: 1rem;
      padding: 1rem;
      font-weight: 500;
      border: 1px solid rgba(255, 255, 255, 0.6);
      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.8);
    }
    .footer-nav a.active {
      color: #4682B4;
    }
  </style>
</head>
<body class="antialiased">

  <div class="container mx-auto max-w-sm p-4 pb-32">

    <!-- ===== ãƒ˜ãƒƒãƒ€ãƒ¼ ===== -->
    <header class="flex justify-between items-center py-4 px-2">
      <h1 class="app-title">Otenki Coord</h1>
      <div class="w-8 h-8 flex items-center justify-center rounded-full bg-white shadow-md">
        <span class="text-xl" role="img" aria-label="settings">âš™ï¸</span>
      </div>
    </header>

    <main>
      <!-- ===== ä»Šæ—¥ã®å¤©æ°—ã‚¨ãƒªã‚¢ ===== -->
      <section class="card text-center transform -rotate-1">
        <h2 class="font-bold text-lg text-gray-600" id="location">æ±äº¬éƒ½, æ¸‹è°·åŒº</h2>
        <p class="text-sm text-gray-400 mb-4" id="date">9æœˆ23æ—¥ (ç«)</p>
        
        <div class="flex justify-center items-center gap-4">
          <!-- å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆçµµæ–‡å­—ï¼‰ -->
          <span class="text-7xl" role="img" aria-label="partly-sunny" id="weather-icon">ğŸŒ¤ï¸</span>
          <div>
            <!-- ç¾åœ¨ã®æ°—æ¸© -->
            <p class="text-6xl font-bold text-gray-800" id="temperature">23<span class="text-2xl align-top text-gray-500">â„ƒ</span></p>
          </div>
        </div>

        <div class="mt-4 flex justify-around text-center">
          <div>
            <p class="text-sm text-gray-500">æœ€é«˜/æœ€ä½</p>
            <p class="font-bold text-gray-700" id="temp-range">25â„ƒ / 18â„ƒ</p>
          </div>
          <div>
            <p class="text-sm text-gray-500">é™æ°´ç¢ºç‡</p>
            <p class="font-bold text-gray-700" id="rain-probability">20%</p>
          </div>
        </div>
      </section>

      <!-- ===== ä»Šæ—¥ã®æœè£…ææ¡ˆã‚¨ãƒªã‚¢ ===== -->
      <section class="card transform rotate-1">
        <h3 class="font-bold text-lg mb-4 text-center">ãã‚‡ã†ã®ã‚³ãƒ¼ãƒ‡æ¡ˆ</h3>
        <div class="flex justify-around items-center text-center">
          <!-- æœè£…ã‚¢ã‚¤ã‚³ãƒ³ (çµµæ–‡å­—) -->
          <div class="flex flex-col items-center">
            <div class="icon-bg"><span role="img" aria-label="cardigan" id="clothing-icon-1">ğŸ§¥</span></div>
            <p class="text-sm mt-2 font-semibold" id="clothing-name-1">ã‚«ãƒ¼ãƒ‡</p>
          </div>
          <span class="plus-icon">+</span>
          <div class="flex flex-col items-center">
            <div class="icon-bg"><span role="img" aria-label="t-shirt" id="clothing-icon-2">ğŸ‘•</span></div>
            <p class="text-sm mt-2 font-semibold" id="clothing-name-2">åŠè¢–</p>
          </div>
          <span class="plus-icon">+</span>
          <div class="flex flex-col items-center">
             <div class="icon-bg"><span role="img" aria-label="jeans" id="clothing-icon-3">ğŸ‘–</span></div>
            <p class="text-sm mt-2 font-semibold" id="clothing-name-3">é•·ã‚ºãƒœãƒ³</p>
          </div>
        </div>
        <p class="mt-6 text-sm advice-box" id="clothing-advice">
          æ—¥ä¸­ã¯ã½ã‹ã½ã‹é™½æ°—ã ã‘ã©ã€å¤œã¯è‚Œå¯’ã„ã‹ã‚‚ã€‚ç¾½ç¹”ã‚‹ã‚‚ã®ãŒã‚ã‚‹ã¨å®‰å¿ƒã ã‚ˆï¼
        </p>
      </section>

      <!-- ===== æŒã¡ç‰©ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚¨ãƒªã‚¢ ===== -->
      <section class="card transform -rotate-1">
        <h3 class="font-bold text-lg mb-4">ãŠã™ã™ã‚ã®æŒã¡ç‰©</h3>
        <div class="space-y-4" id="items-advice">
          <div class="flex items-center gap-4">
            <span class="text-3xl" role="img" aria-label="umbrella">ğŸŒ‚</span>
            <p class="text-sm">å¤•æ–¹ã‹ã‚‰é›¨ãŒé™ã‚‹ã‹ã‚‚ï¼ŸæŠ˜ã‚ŠãŸãŸã¿å‚˜ãŒã‚ã‚‹ã¨å®‰å¿ƒï¼</p>
          </div>
          <div class="flex items-center gap-4">
            <span class="text-3xl" role="img" aria-label="sunglasses">ğŸ•¶ï¸</span>
            <p class="text-sm">æ—¥å·®ã—ãŒå¼·ã„ã‹ã‚‰ã€UVå¯¾ç­–ã¯å¿˜ã‚Œãšã«ã­ã€‚</p>
          </div>
        </div>
      </section>
    </main>
  </div>
  
  <!-- ===== ãƒ•ãƒƒã‚¿ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ ===== -->
  <footer class="fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-sm max-w-sm mx-auto rounded-t-3xl shadow-lg border-t border-blue-100">
    <nav class="flex justify-around py-3">
      <a href="#" class="flex flex-col items-center justify-center text-center w-full py-2 active">
        <span class="text-2xl" role="img" aria-label="home">ğŸ </span>
        <span class="text-xs font-bold">ãƒ›ãƒ¼ãƒ </span>
      </a>
      <a href="#" class="flex flex-col items-center justify-center text-gray-400 text-center w-full py-2">
        <span class="text-2xl" role="img" aria-label="calendar">ğŸ—“ï¸</span>
        <span class="text-xs">é€±é–“</span>
      </a>
      <a href="#" class="flex flex-col items-center justify-center text-gray-400 text-center w-full py-2">
        <span class="text-2xl" role="img" aria-label="people">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</span>
        <span class="text-xs">ã¿ã‚“ãª</span>
      </a>
      <a href="#" class="flex flex-col items-center justify-center text-gray-400 text-center w-full py-2">
        <span class="text-2xl" role="img" aria-label="person">ğŸ¥°</span>
        <span class="text-xs">ãƒã‚¤ãƒšãƒ¼ã‚¸</span>
      </a>
    </nav>
  </footer>

  <script>
    // ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦è¡¨ç¤ºã™ã‚‹é–¢æ•°
    async function fetchAndDisplayData() {
      try {
        // å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        const weatherResponse = await fetch('/api/v1/weather?lat=35.6762&lon=139.6503');
        const weatherData = await weatherResponse.json();
        
        if (weatherData.status === 'success') {
          // å¤©æ°—ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
          document.getElementById('weather-icon').textContent = weatherData.data.current.icon;
          document.getElementById('temperature').innerHTML = weatherData.data.current.temperature + '<span class="text-2xl align-top text-gray-500">â„ƒ</span>';
          document.getElementById('temp-range').textContent = `${weatherData.data.today.max_temp}â„ƒ / ${weatherData.data.today.min_temp}â„ƒ`;
          document.getElementById('rain-probability').textContent = weatherData.data.today.rain_probability + '%';
          
          // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
          const temp = weatherData.data.current.temperature;
          const clothingResponse = await fetch(`/api/v1/clothing?temperature=${temp}&weather=${weatherData.data.current.condition}`);
          const clothingData = await clothingResponse.json();
          
          if (clothingData.status === 'success') {
            // æœè£…ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
            const outfit = clothingData.data.outfit;
            document.getElementById('clothing-icon-1').textContent = outfit.outer ? 'ğŸ§¥' : 'ğŸ‘•';
            document.getElementById('clothing-name-1').textContent = outfit.outer || outfit.top;
            document.getElementById('clothing-icon-2').textContent = 'ğŸ‘•';
            document.getElementById('clothing-name-2').textContent = outfit.top;
            document.getElementById('clothing-icon-3').textContent = 'ğŸ‘–';
            document.getElementById('clothing-name-3').textContent = outfit.bottom;
            document.getElementById('clothing-advice').textContent = clothingData.data.advice;
          }
        }
      } catch (error) {
        console.error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
      }
    }

    // ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥é–¢æ•°
    function refreshData() {
      fetchAndDisplayData();
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    document.addEventListener('DOMContentLoaded', fetchAndDisplayData);
  </script>
</body>
</html>